<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Petugas</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-4 px-2">
    <h2 class="mb-4 text-center text-md-start">Dashboard Petugas</h2>
    <div class="row g-3 mb-4">
      <div class="col-6 col-md-3">
        <div class="card text-center shadow-sm border-0">
          <div class="card-body">
            <div class="mb-2"><i class="bi bi-inbox-fill text-primary" style="font-size:2rem;"></i></div>
            <h5 class="card-title mb-1">Permohonan Masuk</h5>
            <div class="display-6 fw-bold">12</div>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="card text-center shadow-sm border-0">
          <div class="card-body">
            <div class="mb-2"><i class="bi bi-hourglass-split text-warning" style="font-size:2rem;"></i></div>
            <h5 class="card-title mb-1">Diproses</h5>
            <div class="display-6 fw-bold">7</div>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="card text-center shadow-sm border-0">
          <div class="card-body">
            <div class="mb-2"><i class="bi bi-check-circle-fill text-success" style="font-size:2rem;"></i></div>
            <h5 class="card-title mb-1">Disetujui</h5>
            <div class="display-6 fw-bold">3</div>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3">
        <div class="card text-center shadow-sm border-0">
          <div class="card-body">
            <div class="mb-2"><i class="bi bi-x-circle-fill text-danger" style="font-size:2rem;"></i></div>
            <h5 class="card-title mb-1">Ditolak</h5>
            <div class="display-6 fw-bold">2</div>
          </div>
        </div>
      </div>
    </div>
    <div class="card shadow-sm border-0">
      <div class="card-body p-2 p-md-4">
        <div class="row mb-3 g-2 justify-content-end">
          <div class="col-12 col-md-3">
            <select id="jenisFilter" class="form-select">
              <option value="">Semua Jenis</option>
              <option value="Surat Domisili">Surat Domisili</option>
              <option value="Surat Usaha">Surat Usaha</option>
              <option value="Surat Tidak Mampu">Surat Tidak Mampu</option>
            </select>
          </div>
          <div class="col-12 col-md-3">
            <select id="statusFilter" class="form-select">
              <option value="">Semua Status</option>
              <option value="Diproses">Diproses</option>
              <option value="Disetujui">Disetujui</option>
              <option value="Ditolak">Ditolak</option>
            </select>
          </div>
        </div>
        <div class="d-none d-sm-block table-responsive">
          <table class="table table-hover align-middle mb-0" id="permohonanTable">
            <thead class="table-primary">
              <tr>
                <th scope="col">No</th>
                <th scope="col">Nomor</th>
                <th scope="col">Pemohon</th>
                <th scope="col">Jenis</th>
                <th scope="col">Tanggal</th>
                <th scope="col">Status</th>
                <th scope="col">Aksi</th>
              </tr>
            </thead>
            <tbody>
              <tr data-status="Diproses" data-jenis="Surat Domisili">
                <td>1</td>
                <td>PMH-2026-010</td>
                <td>Budi Santoso</td>
                <td>Surat Domisili</td>
                <td>2026-01-25</td>
                <td><span class="badge bg-warning text-dark">Diproses</span></td>
                <td>
                  <a href="#" class="btn btn-sm btn-info"><i class="bi bi-eye"></i> <span class="d-none d-md-inline">Detail</span></a>
                  <a href="#" class="btn btn-sm btn-success"><i class="bi bi-check"></i></a>
                  <a href="#" class="btn btn-sm btn-danger"><i class="bi bi-x"></i></a>
                </td>
              </tr>
              <tr data-status="Disetujui" data-jenis="Surat Usaha">
                <td>2</td>
                <td>PMH-2026-011</td>
                <td>Siti Aminah</td>
                <td>Surat Usaha</td>
                <td>2026-01-24</td>
                <td><span class="badge bg-success">Disetujui</span></td>
                <td>
                  <a href="#" class="btn btn-sm btn-info"><i class="bi bi-eye"></i> <span class="d-none d-md-inline">Detail</span></a>
                </td>
              </tr>
              <tr data-status="Ditolak" data-jenis="Surat Tidak Mampu">
                <td>3</td>
                <td>PMH-2026-012</td>
                <td>Andi Wijaya</td>
                <td>Surat Tidak Mampu</td>
                <td>2026-01-23</td>
                <td><span class="badge bg-danger">Ditolak</span></td>
                <td>
                  <a href="#" class="btn btn-sm btn-info"><i class="bi bi-eye"></i> <span class="d-none d-md-inline">Detail</span></a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Mobile Card View -->
        <div class="d-block d-sm-none" id="mobileCardList">
          <!-- Cards will be generated by JS -->
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <style>
    .mobile-card {
      border-radius: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      margin-bottom: 1rem;
    }
    .mobile-card .badge {
      font-size: 1em;
    }
  </style>
  <script>
    // Helper: get all data from table rows
    function getTableData() {
      var rows = document.querySelectorAll('#permohonanTable tbody tr');
      var data = [];
      rows.forEach(function(row) {
        data.push({
          no: row.children[0].textContent,
          nomor: row.children[1].textContent,
          pemohon: row.children[2].textContent,
          jenis: row.children[3].textContent,
          tanggal: row.children[4].textContent,
          status: row.getAttribute('data-status'),
          statusHtml: row.children[5].innerHTML,
          aksiHtml: row.children[6].innerHTML,
        });
      });
      return data;
    }

    // Render mobile cards
    function renderMobileCards() {
      var data = getTableData();
      var statusValue = document.getElementById('statusFilter').value;
      var jenisValue = document.getElementById('jenisFilter').value;
      var container = document.getElementById('mobileCardList');
      container.innerHTML = '';
      data.forEach(function(item) {
        var matchStatus = !statusValue || item.status === statusValue;
        var matchJenis = !jenisValue || item.jenis === jenisValue;
        if (matchStatus && matchJenis) {
          var card = document.createElement('div');
          card.className = 'card mobile-card';
          card.innerHTML = `
            <div class="card-body p-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="fw-bold">${item.nomor}</span>
                <span>${item.statusHtml}</span>
              </div>
              <div class="mb-1"><strong>Pemohon:</strong> ${item.pemohon}</div>
              <div class="mb-1"><strong>Jenis:</strong> ${item.jenis}</div>
              <div class="mb-1"><strong>Tanggal:</strong> ${item.tanggal}</div>
              <div class="d-flex gap-2 mt-2">${item.aksiHtml}</div>
            </div>
          `;
          container.appendChild(card);
        }
      });
    }

    // Table filter for desktop
    function filterRows() {
      var statusValue = document.getElementById('statusFilter').value;
      var jenisValue = document.getElementById('jenisFilter').value;
      var rows = document.querySelectorAll('#permohonanTable tbody tr');
      rows.forEach(function(row) {
        var matchStatus = !statusValue || row.getAttribute('data-status') === statusValue;
        var matchJenis = !jenisValue || row.getAttribute('data-jenis') === jenisValue;
        row.style.display = (matchStatus && matchJenis) ? '' : 'none';
      });
      renderMobileCards();
    }
    document.getElementById('statusFilter').addEventListener('change', filterRows);
    document.getElementById('jenisFilter').addEventListener('change', filterRows);
    // Initial render
    window.addEventListener('DOMContentLoaded', renderMobileCards);
  </script>
</body>
</html>
